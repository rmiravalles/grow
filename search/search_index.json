{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83d\udc4b Welcome to My Kubernetes Learning Portfolio","text":"<p>Hello!</p> <p>My name's Rodrigo, originally from Brazil, and living in Spain for the past 8 years. I'm a novice DevOps Engineer working with Azure infrastructure. I'm an everyday learner, with a passion for challenges and discoveries. My goal is to skill up in Kubernetes and obtain the CKA certification.</p> <p>Here I'll document my journey through the KubeSkills GROW program (GitHub Repository of Work). You'll find my notes, reflections, and hands-on exercises, as well as the Daily Kubeskills challenges.</p> <p>I'll do my best to be as consistent as possible.</p> <p>Under Reflections you'll find my weekly summaries, exercises, and insights, as defined in the GROW curriculum. Under Daily Notes you'll find my notes and solutions to the Daily Kubeskills challenges. Since there are many, I'll bundle them by week.</p>"},{"location":"#getting-started","title":"Getting Started","text":"<p>For my Kubernetes learning environment, I chose to use K3D, instead of Kind, the one suggested in the curriculum.</p> <ul> <li>Setting Up My Kubernetes Environment</li> </ul>"},{"location":"#reflections","title":"\ud83d\udcd8 Reflections","text":"<ul> <li>Week 1: Kubernetes Fundamentals</li> <li>Week 2: GitOps</li> <li>Week 3: Security</li> </ul>"},{"location":"blog/","title":"Blog","text":""},{"location":"reflections/getting-started/","title":"\ud83e\uddea Getting Started - Setting up my Kubernetes development environment","text":"<p>Welcome! This is your first notebook entry in the GROW program. Use this space to document the setup of your Kubernetes learning environment and reflect on what you\u2019re configuring.</p>"},{"location":"reflections/getting-started/#goals","title":"\u2705 Goals","text":"<p>By the end of this section, you will: - Install and configure basic Kubernetes CLI tools - Create your first local Kubernetes cluster using <code>K3D</code> - Deploy and inspect your first Pod - Verify your setup is working for the labs ahead</p>"},{"location":"reflections/getting-started/#step-by-step-setup-instructions","title":"\ud83d\udee0\ufe0f Step-by-Step Setup Instructions","text":""},{"location":"reflections/getting-started/#step-1-install-kubectl","title":"Step 1: Install <code>kubectl</code>","text":"<p>Follow the official guide: \u27a1\ufe0f https://kubernetes.io/docs/tasks/tools/install-kubectl/</p> <p>Verify: <pre><code>kubectl version --client\n</code></pre></p>"},{"location":"reflections/getting-started/#step-2-install-k3d","title":"Step 2: Install <code>K3D</code>","text":"<p>Follow the official guide: \u27a1\ufe0f https://k3d.io/stable/#installation</p> <p>Verify: <pre><code>k3d version\n</code></pre></p>"},{"location":"reflections/getting-started/#step-3-create-a-local-cluster","title":"Step 3: Create a Local Cluster","text":"<p>For these labs, I created a cluster from a config file, but you can also create one with a simple command:</p> <pre><code>k3d cluster create grow-cluster\n</code></pre> <p>To create a cluster with a config file, use:</p> <pre><code>k3d cluster create --config k3d-config.yaml\n</code></pre> <p>This cluster has one control-plane node and two worker nodes, as defined in the <code>k3d-config.yaml</code> file. In K3D, they are called <code>server</code> and <code>agent</code> nodes, respectively.</p> <p>Note: Here I had to enforce the Kubernetes version, because if I simply created a cluster without specifying the version, I got Kubernetes 1.31, which was not compatible with Flux. When running <code>flux check --pre</code>, the check didn't pass because of the Kubernetes version. Now it works.</p> <p>Check your nodes:</p> <pre><code>kubectl get nodes\n</code></pre>"},{"location":"reflections/getting-started/#step-4-deploy-your-first-pod","title":"Step 4: Deploy Your First Pod","text":"<pre><code>kubectl run nginx --image=nginx\nkubectl get pods\n</code></pre> <p>Describe it: <pre><code>kubectl describe pod nginx\n</code></pre></p> <p>Delete it: <pre><code>kubectl delete pod nginx\n</code></pre></p>"},{"location":"reflections/getting-started/#next-step","title":"\ud83c\udfaf Next Step","text":"<p>When ready, move on to your first official lab: \ud83d\udc49 Kubernetes Fundamentals \u2013 Deploying a Pod and Deployment</p>"},{"location":"reflections/week-1/","title":"Week 1 Reflection \u2013 NGINX Pod and Deployment","text":"<p>This week, I worked through the Kubernetes fundamentals lab where I deployed a basic NGINX web server using both a Pod and a Deployment. I also learned about security contexts and how to scale workloads.</p> <p>NOTE: For these exercises, I'm using K3D instead of Kind, since I'm more used to it and it's more lightweight on my machine.</p>"},{"location":"reflections/week-1/#what-i-learned","title":"\u2705 What I Learned","text":""},{"location":"reflections/week-1/#pods-vs-deployments","title":"Pods vs Deployments","text":"<p>Pods and Deployments are related but serve different purposes in Kubernetes.</p>"},{"location":"reflections/week-1/#pods","title":"Pods","text":"<ul> <li>A Pod is the smallest deployable unit in Kubernetes.</li> <li>It represents one or more containers that share storage and network resources.</li> <li>Pods are ephemeral; if a Pod fails, it does not automatically get replaced.</li> <li>Pods cannot be scaled directly. We'd need to create new Pods manually or use a higher-level controller (e.g., Deployment).</li> <li>Pods can be used for simple, single-instance applications and short-lived tasks.</li> </ul>"},{"location":"reflections/week-1/#deployments","title":"Deployments","text":"<ul> <li>A higher-level controller that manages ReplicaSets, which in turn manage Pods.</li> <li>Ensure that the desired state (e.g., number of replicas of a Pod) is continuously maintained.</li> <li>Support rolling updates and rollbacks.</li> <li>Allow for easy scaling of applications by adjusting the number of replicas.</li> <li>When you create a Deployment, it automatically creates a ReplicaSet, which in turn creates the Pods.</li> <li>The Pods are created from a Pod template defined in the Deployment spec.</li> <li>We never create Pods directly when using Deployments.</li> <li>We usually don't manage ReplicaSets manually either.</li> </ul> <pre><code># Object Hierarchy\nDeployment\n    \u2514\u2500\u2500 ReplicaSet\n          \u2514\u2500\u2500 Pod\n  ```\n\nWe can easily identify which resources are managed by a Deployment by looking at their names. The name of the ReplicaSet and Pods will include the name of the Deployment as a prefix, followed by a unique identifier.\n\n![Deployment](./images/deployment.png)\n\n## The kubectl apply Command\n\n- `kubectl apply` is used to create or update Kubernetes resources declaratively from configuration files (YAML or JSON).\n- When you run `kubectl apply -f &lt;file&gt;`, Kubernetes reads the configuration and creates the resource if it doesn't exist, or updates it if it does.\n- This is the recommended way to manage resources in Kubernetes, as it allows for version control and repeatable deployments.\n- The `kubectl run` command, on the other hand, is an imperative command that is used for quickly creating a single Pod from the command line. It is mainly used for testing and debugging purposes, and it does not create a Deployment or ReplicaSet.\n\n## The kubectl describe Command\n\n- `kubectl describe` provides detailed information about a specific Kubernetes resource, including its status, events, and configuration.\n- It is useful for troubleshooting and understanding the state of a resource.\n- `kubectl describe pod nginx` will show you the details of the specified Pod, including its containers, volumes, and any events that have occurred.\n\n## Scaling Deployments\n\n- Scaling a Deployment means adjusting the number of replicas (Pods) that it manages.\n- You can scale a Deployment using the `kubectl scale` command or by updating the Deployment configuration and applying it again.\n- When you scale a Deployment, Kubernetes will create or delete Pods as needed to match the desired number of replicas.\n\nThe command below will scale the `nginx-deployment` to 4 replicas:\n\n```bash\nkubectl scale deployment nginx-deployment --replicas=4\n</code></pre> <p>Updating the Deployment configuration is, however, the recommended way to manage scaling in production environments.</p>"},{"location":"reflections/week-1/#security-contexts","title":"Security Contexts","text":"<ul> <li>Security contexts define privilege and access control settings for Pods or containers.</li> <li>Key settings include:</li> <li><code>runAsNonRoot</code>: Ensures the container does not run as the root user.</li> <li><code>allowPrivilegeEscalation</code>: Prevents processes from gaining more privileges than their parent process.</li> <li>Implementing security contexts enhances the security posture of workloads by minimizing potential attack vectors.</li> </ul> <p>When <code>runAsNonRoot: true</code> is set, Kubernetes checks the UID the container will run with.</p> <p>The container must run as a non-zero UID (i.e., not UID 0).</p> <p>If the image\u2019s default user is root (UID 0) and you have not explicitly set a different user (via <code>runAsUser</code> or in the Dockerfile), Kubernetes will prevent the Pod from starting.</p> <p>When <code>allowPrivilegeEscalation: false</code> is set:</p> <ul> <li>The container cannot use mechanisms like <code>setuid</code>, <code>setgid</code>, or file capabilities to elevate privileges.</li> <li>Even if a binary inside the container has the <code>setuid</code> bit set (for example <code>/usr/bin/sudo</code>), it will not grant elevated privileges.</li> <li>The process is prevented from becoming root or otherwise gaining extra privileges at runtime.</li> </ul> <p>This is an important security hardening option:</p> <ul> <li>Limits the impact of a container escape or application vulnerability</li> <li>Helps enforce the principle of least privilege</li> <li>Is often required by security policies and benchmarks (e.g., CIS Kubernetes Benchmark, Pod Security Standards \u201crestricted\u201d)</li> </ul>"},{"location":"reflections/week-1/#how-it-works-under-the-hood","title":"How it works under the hood","text":"<p>Kubernetes enforces this using the Linux kernel's <code>no_new_privs</code> flag.</p> <p>Once set, the kernel prevents any exec'd process from gaining additional privileges.</p>"},{"location":"reflections/week-1/#what-was-challenging","title":"\u2753 What Was Challenging","text":""},{"location":"reflections/week-1/#-the-security-contexts-were-a-new-concept-for-me-and-i-had-to-read-the-documentation-and-consult-different-resources-to-understand-how-they-work","title":"- The security contexts were a new concept for me, and I had to read the documentation and consult different resources to understand how they work.","text":""},{"location":"reflections/week-1/#commands-i-practiced","title":"\ud83e\uddea Commands I Practiced","text":"<pre><code>kubectl apply -f nginx-pod.yaml\nkubectl get pods\nkubectl describe pod nginx-pod\nkubectl apply -f nginx-deployment.yaml\nkubectl get deployments\nkubectl scale deployment nginx-deployment --replicas=4\nkubectl delete deployment nginx-deployment\nkubectl delete pod nginx-pod\n</code></pre>"},{"location":"reflections/week-1/#questions-i-still-have","title":"\ud83d\udcdd Questions I Still Have","text":""},{"location":"reflections/week-1/#-i-still-need-to-brush-up-on-my-linux-skills-to-better-understand-how-security-contexts-work","title":"- I still need to brush up on my Linux skills to better understand how security contexts work.","text":""},{"location":"reflections/week-1/#related-yamls","title":"\ud83d\udcce Related YAMLs","text":"<ul> <li><code>nginx-pod.yaml</code></li> <li><code>nginx-deployment.yaml</code></li> </ul>"},{"location":"reflections/week-1/#looking-ahead","title":"\ud83d\ude80 Looking Ahead","text":"<p>I\u2019m excited to explore GitOps in Week 2 and automate deployments using FluxCD.</p>"},{"location":"reflections/week-2/","title":"Week 2 Reflection \u2013 GitOps with FluxCD","text":"<p>This week, I set up GitOps in my cluster using FluxCD. I bootstrapped my own repository, created a Git source and a Kustomization, and learned how declarative workflows can automate and standardize Kubernetes operations.</p>"},{"location":"reflections/week-2/#what-i-learned","title":"\u2705 What I Learned","text":""},{"location":"reflections/week-2/#what-is-gitops","title":"What is GitOps?","text":"<p>GitOps is a deployment model that uses Git as the single source of truth for declarative infrastructure and applications. Changes to the desired state are made in Git, and automated processes ensure that the actual state in the cluster matches the desired state.</p>"},{"location":"reflections/week-2/#core-principles-of-gitops","title":"Core principles of GitOps","text":"<ol> <li>Declarative Descriptions</li> <li>Versioned and Immutable Storage</li> <li>Automated Delivery</li> <li>Automatic drift detection and correction</li> </ol>"},{"location":"reflections/week-2/#benefits-of-gitops","title":"Benefits of GitOps","text":"<ul> <li>Improved collaboration and transparency</li> <li>Enhanced security and compliance</li> <li>Faster and more reliable deployments</li> <li>Faster recovery and rollbacks</li> </ul>"},{"location":"reflections/week-2/#gitops-pull-based-model","title":"GitOps Pull-based model","text":"<p>In a pull-based model, the GitOps operator (like FluxCD) continuously monitors the Git repository for changes. When a change is detected, the operator pulls the new configuration and applies it to the cluster. This approach allows for better security and scalability, as the operator can run with limited permissions and does not require direct access to the cluster from external systems.</p> <pre><code>graph TB\n    subgraph \"Developer Workflow\"\n        DEV[Developer] --&gt;|1. Commit &amp; Push| GIT[Git Repository&lt;br/&gt;Single Source of Truth]\n    end\n\n    subgraph \"GitOps Automation\"\n        GIT --&gt;|2. Monitors for changes| AGENT[GitOps Agent&lt;br/&gt;ArgoCD/Flux/Jenkins X]\n        AGENT --&gt;|3. Detects drift| AGENT\n        AGENT --&gt;|4. Pulls desired state| GIT\n    end\n\n    subgraph \"Kubernetes Cluster\"\n        AGENT --&gt;|5. Applies changes| K8S[Kubernetes API]\n        K8S --&gt;|6. Deploys/Updates| PODS[Pods &amp; Services&lt;br/&gt;Current State]\n        PODS --&gt;|7. Reports status| AGENT\n    end\n\n    subgraph \"Continuous Sync\"\n        AGENT -.-&gt;|Continuous monitoring| PODS\n        PODS -.-&gt;|State comparison| GIT\n    end\n\n    style GIT fill:#e1f5ff,stroke:#0066cc,stroke-width:3px\n    style AGENT fill:#fff4e1,stroke:#ff9900,stroke-width:3px\n    style K8S fill:#e8f5e9,stroke:#4caf50,stroke-width:2px\n    style PODS fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px\n\n    classDef pullAction fill:#ffffcc,stroke:#ff6600,stroke-width:2px,stroke-dasharray: 5 5</code></pre>"},{"location":"reflections/week-2/#installing-fluxcd","title":"Installing FluxCD","text":"<p>I installed FluxCD using the CLI and bootstrapped my GitHub repository. This process set up all necessary components in my cluster and connected it to my Git repository.</p> <pre><code>flux bootstrap github \\\n  --owner=rmiravalles \\\n  --repository=grow \\\n  --branch=main \\\n  --path=./clusters/grow \\\n  --personal\n</code></pre>"},{"location":"reflections/week-2/#what-was-challenging","title":"\u2753 What Was Challenging","text":""},{"location":"reflections/week-2/#-","title":"-","text":""},{"location":"reflections/week-2/#-_1","title":"-","text":""},{"location":"reflections/week-2/#commands-i-practiced","title":"\ud83e\uddea Commands I Practiced","text":""},{"location":"reflections/week-2/#gitops-impact","title":"\ud83d\udd01 GitOps Impact","text":""},{"location":"reflections/week-2/#-_2","title":"-","text":""},{"location":"reflections/week-2/#-_3","title":"-","text":""},{"location":"reflections/week-2/#questions-i-still-have","title":"\ud83d\udcdd Questions I Still Have","text":""},{"location":"reflections/week-2/#-_4","title":"-","text":""},{"location":"reflections/week-2/#-_5","title":"-","text":""},{"location":"reflections/week-2/#related-files","title":"\ud83d\udcce Related Files","text":"<ul> <li><code>clusters/dev/kustomization.yaml</code></li> <li><code>.flux.yaml</code> (if applicable)</li> <li>GitHub repository path and bootstrap settings</li> </ul>"},{"location":"reflections/week-2/#looking-ahead","title":"\ud83d\ude80 Looking Ahead","text":"<p>I\u2019m curious to explore how GitOps handles secrets, multi-cluster environments, and policy-based validations using tools like SOPS, Kyverno, or Vault.</p>"}]}